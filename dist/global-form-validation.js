"use strict";(()=>{(function(){let F={DEBUG:!1},p=(...t)=>F.DEBUG&&console.log("[FORM-VALIDATION]",...t);function h(){return window.location.pathname.includes("/en")}function A(t){return h()?t:t.replace(/Numeric \(no standard format\)/g,"Numerisch (kein Standardformat)").replace(/digits/g,"Ziffern").replace(/letters/g,"Buchstaben").replace(/with optional space/g,"mit optionalem Leerzeichen").replace(/\bformat\b/gi,"Format").replace(/e\.g\./g,"z.B.").replace(/\bor\b/g,"oder")}let w={Germany:{pattern:/^(?:0[1-9]|[1-9][0-9])[0-9]{3}$/,min:1001,max:99998,format:"5 digits (01001-99998)"},Austria:{pattern:/^[1-9][0-9]{3}$/,format:"4 digits (1000-9999)"},Switzerland:{pattern:/^[1-9][0-9]{3}$/,format:"4 digits (1000-9999)"},"United Kingdom":{pattern:/^([A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}|GIR ?0AA)$/i,format:"UK format (e.g., SW1A 1AA)"},France:{pattern:/^(?:0[1-9]|[1-8][0-9]|9[0-8])[0-9]{3}$/,format:"5 digits (01000-98999)"},Italy:{pattern:/^[0-9]{5}$/,format:"5 digits (00010-99999)"},Spain:{pattern:/^(?:0[1-9]|[1-4][0-9]|5[0-2])[0-9]{3}$/,format:"5 digits (01000-52999)"},Netherlands:{pattern:/^[1-9][0-9]{3} ?[A-Z]{2}$/i,format:"4 digits + 2 letters (e.g., 1234 AB)"},Belgium:{pattern:/^[1-9][0-9]{3}$/,format:"4 digits (1000-9999)"},Poland:{pattern:/^[0-9]{2}-[0-9]{3}$/,format:"2 digits-3 digits (e.g., 00-999)"},Sweden:{pattern:/^[0-9]{3} ?[0-9]{2}$/,format:"5 digits with optional space (e.g., 123 45)"},Denmark:{pattern:/^[1-9][0-9]{3}$/,format:"4 digits (1000-9999)"},Norway:{pattern:/^[0-9]{4}$/,format:"4 digits (0001-9999)"},Finland:{pattern:/^[0-9]{5}$/,format:"5 digits (00000-99999)"},Portugal:{pattern:/^[1-9][0-9]{3}-[0-9]{3}$/,format:"4 digits-3 digits (e.g., 1000-999)"},"Czech Republic":{pattern:/^[0-9]{3} ?[0-9]{2}$/,format:"5 digits with optional space (e.g., 123 45)"},Hungary:{pattern:/^[1-9][0-9]{3}$/,format:"4 digits (1000-9999)"},Romania:{pattern:/^[0-9]{6}$/,format:"6 digits"},Greece:{pattern:/^[0-9]{3} ?[0-9]{2}$/,format:"5 digits with optional space"},Ireland:{pattern:/^(?:[A-Z][0-9]{2} ?[A-Z0-9]{4}|[A-Z]{3} ?[A-Z0-9]{4})$/i,format:"Irish format (e.g., D02 AF30)"},"United States":{pattern:/^[0-9]{5}(-[0-9]{4})?$/,format:"5 digits or 5+4 (e.g., 12345 or 12345-6789)"},Canada:{pattern:/^[A-Z][0-9][A-Z] ?[0-9][A-Z][0-9]$/i,format:"A1A 1A1 format"},Australia:{pattern:/^[0-9]{4}$/,format:"4 digits (0200-9999)"},"New Zealand":{pattern:/^[0-9]{4}$/,format:"4 digits (0110-9999)"},Japan:{pattern:/^[0-9]{3}-[0-9]{4}$/,format:"3 digits-4 digits (e.g., 100-0001)"},"South Korea":{pattern:/^[0-9]{5}$/,format:"5 digits"},China:{pattern:/^[0-9]{6}$/,format:"6 digits"},India:{pattern:/^[0-9]{6}$/,format:"6 digits"},Brazil:{pattern:/^[0-9]{5}-?[0-9]{3}$/,format:"5 digits-3 digits (e.g., 12345-678)"},Mexico:{pattern:/^[0-9]{5}$/,format:"5 digits"},Russia:{pattern:/^[0-9]{6}$/,format:"6 digits"}},c={ZIP_IS_VALID:!1,CAN_SUBMIT:!1,isEnglishSite:h,translateZipFormat:A,errorMessages:{zip_required:{de:"Bitte geben Sie eine g\xFCltige Postleitzahl ein",en:"Please enter a valid ZIP code"},zip_invalid:{de:"Ung\xFCltige Postleitzahl f\xFCr {country}. Erwartetes Format: {format}",en:"Invalid ZIP code for {country}. Expected format: {format}"},email_required:{de:"Bitte geben Sie eine E-Mail-Adresse ein",en:"Please enter an email address"},gender_required:{de:"Bitte w\xE4hlen Sie ein Geschlecht aus",en:"Please select a gender"},country_required:{de:"Bitte w\xE4hlen Sie ein Land aus",en:"Please select a country"},gdpr_required:{de:"Bitte akzeptieren Sie die Datenschutzerkl\xE4rung",en:"Please accept the privacy policy"},email_exists:{de:"Diese E-Mail-Adresse ist bereits registriert. Bitte verwenden Sie eine andere E-Mail-Adresse.",en:"This email is already registered. Please use a different email address."},signup_error:{de:"Bei der Verarbeitung Ihrer Anmeldung ist ein Problem aufgetreten. Bitte versuchen Sie es in einem Moment erneut.",en:"There was a problem processing your signup. Please try again in a moment."},network_error:{de:"Verbindungsfehler. Bitte \xFCberpr\xFCfen Sie Ihre Internetverbindung und versuchen Sie es erneut.",en:"Connection error. Please check your internet and try again."},generic_error:{de:"Etwas ist schiefgelaufen. Bitte versuchen Sie es erneut.",en:"Something went wrong. Please try again."}},getErrorMessage:function(t){let e=this.isEnglishSite()?"en":"de";return this.errorMessages[t]?this.errorMessages[t][e]:this.errorMessages.generic_error[e]},updateSubmitButtonState:function(){}},i={zipValid:!1,emailValid:!1,genderValid:!1,gdprValid:!1,countryValid:!1,checkFormValidity:function(){var t=document.querySelectorAll("#wf-form-Waitlist-Form"),e=this;t.forEach(function(r){var l=r.querySelector('input[name="Postleitzahl"], input[name="zip"]')||r.querySelector('select[name="gender"], select[name="Gender"], select[name="Geschlecht"]')||r.querySelector('#country, select[name="country"]');if(l){var a=r.querySelector('input[type="submit"], button[type="submit"], .w-button');if(a&&!a.hasAttribute("data-submitting")){var n=e.emailValid&&e.zipValid&&e.genderValid&&e.gdprValid&&e.countryValid;p("checkFormValidity:",{email:e.emailValid,zip:e.zipValid,gender:e.genderValid,gdpr:e.gdprValid,country:e.countryValid,canSubmit:n}),a.disabled=!n,a.style.opacity=n?"1":"0.6",a.style.cursor=n?"pointer":"not-allowed"}}})}};function L(t,e){var r;return function(){var l=this,a=arguments;clearTimeout(r),r=setTimeout(function(){t.apply(l,a)},e)}}function f(t,e,r,l){var a=t.closest(".form_field"),n=a?a.closest(".form_field-wrap"):null,s=n?n.querySelector(".form_validation"):null;switch(t.classList.remove("zip-validating","zip-valid","zip-invalid"),a&&a.classList.remove("error"),s&&s.classList.remove("show"),e){case"typing":t.classList.add("zip-validating");break;case"valid":t.classList.add("zip-valid"),t.setAttribute("aria-invalid","false");break;case"invalid":if(t.classList.add("zip-invalid"),t.setAttribute("aria-invalid","true"),a&&a.classList.add("error"),s&&(r||l)){var d=r;if(!d&&l&&l.format){var m=document.querySelector('#country, select[name="country"], select[name="Country"]'),V=m?m.value:"",o=A(l.format);d=c.getErrorMessage("zip_invalid").replace("{country}",V||"").replace("{format}",o)}d&&(s.textContent=d,s.classList.add("show"))}break;case"empty":t.setAttribute("aria-invalid","false");break}}function y(t,e,r,l){if(!e){f(t,"empty");return}var a=document.querySelector('#country, select[name="country"], select[name="Country"]'),n=a?a.value:"";if(!n){l&&f(t,"invalid","Please select a country first");return}var s=w[n];if(!s){f(t,"valid"),i.zipValid=!0,c.ZIP_IS_VALID=!0,i.checkFormValidity();return}var d=s.pattern.test(e);if(d&&s.min&&s.max){var m=parseInt(e,10);d=m>=s.min&&m<=s.max}d?(i.zipValid=!0,c.ZIP_IS_VALID=!0,f(t,"valid")):(i.zipValid=!1,c.ZIP_IS_VALID=!1,l&&f(t,"invalid",null,s)),i.checkFormValidity()}function I(){var t=document.querySelectorAll('input[name="Postleitzahl"], input[id="Postleitzahl"], input[name="zip"], input[name="Zip"], input[name="ZIP"], input[id="zip"], input[id="Zip"], input[placeholder*="zip" i], input[placeholder*="postleitzahl" i], input[placeholder*="postal" i]');if(t.length!==0){t.forEach(function(r){(!r.placeholder||r.placeholder.trim()==="")&&(r.placeholder=" "),r.value?y(r,r.value.trim(),!1,!1):(i.zipValid=!1,c.ZIP_IS_VALID=!1,i.checkFormValidity());var l=L(function(){y(r,r.value.trim(),!1,!1)},500);r.addEventListener("input",function(a){var n=a.target.value.trim();n?(f(r,"typing"),l()):(i.zipValid=!1,c.ZIP_IS_VALID=!1,i.checkFormValidity(),f(r,"empty"))}),r.addEventListener("blur",function(a){var n=a.target.value.trim();n?y(r,n,!0,!0):(i.zipValid=!1,c.ZIP_IS_VALID=!1,i.checkFormValidity())}),r.setAttribute("aria-invalid","false")});var e=document.querySelector('#country, select[name="country"], select[name="Country"]');e&&(e.value||(e.value="Germany"),e.addEventListener("change",function(){t.forEach(function(r){r.value&&y(r,r.value.trim(),!1,!0)})}))}}function _(){for(var t=document.querySelectorAll('select[name="gender"], select[name="Gender"], select[name="Geschlecht"]'),e=0;e<t.length;e++)if(t[e].value&&t[e].value!=="")return t[e].value;return""}function b(){for(var t=document.querySelectorAll('#country, select[name="country"], select[name="Country"]'),e=0;e<t.length;e++)if(t[e].value&&t[e].value!=="")return t[e].value;return""}function S(){var t=_(),e=b();i.genderValid=t!=="",i.countryValid=e!=="",i.checkFormValidity()}function E(){var t=document.querySelectorAll("#wf-form-Waitlist-Form"),e=!1;if(t.forEach(function(a){var n=a.querySelector('input[name="Postleitzahl"], input[name="zip"]')||a.querySelector('select[name="gender"], select[name="Gender"], select[name="Geschlecht"]')||a.querySelector('#country, select[name="country"]');if(n){e=!0;var s=a.querySelectorAll('input[type="email"], input[name="email"], input[name="Email"]');s.forEach(function(o){o.addEventListener("input",function(u){i.emailValid=u.target.value&&u.target.value.includes("@"),i.checkFormValidity()}),o.addEventListener("blur",function(u){var g=u.target.closest(".form_field-wrap")||u.target.closest(".form_field");if(g){var v=g.querySelector(".form_validation");v&&(u.target.value?u.target.value.includes("@")?v.classList.remove("show"):(v.textContent=h()?"Please enter a valid email address":"Bitte geben Sie eine g\xFCltige E-Mail-Adresse ein",v.classList.add("show")):(v.textContent=c.getErrorMessage("email_required"),v.classList.add("show")))}}),i.emailValid=o.value&&o.value.includes("@")});var d=a.querySelector('input[type="checkbox"][name="checkbox"]');d&&(i.gdprValid=d.checked,d.addEventListener("change",function(o){i.gdprValid=o.target.checked;var u=o.target.closest(".form_field-wrap");if(u){var g=u.querySelector(".form_validation");g&&(o.target.checked?g.classList.remove("show"):g.classList.add("show"))}i.checkFormValidity()}));var m=a.querySelectorAll('select[name="gender"], select[name="Gender"], select[name="Geschlecht"]');m.forEach(function(o){o.addEventListener("change",function(){S()})});var V=a.querySelectorAll('#country, select[name="country"], select[name="Country"]');V.forEach(function(o){o.addEventListener("change",function(){S()})})}}),!e){p("No actual waitlist form found");return}document.addEventListener("click",function(a){var n=a.target.closest(".nice-select .list li");n&&setTimeout(S,150)});var r="",l="";setInterval(function(){var a=_(),n=b();(a!==r||n!==l)&&(r=a,l=n,p("Polling detected select change - gender:",a,"country:",n),i.genderValid=a!=="",i.countryValid=n!=="",i.checkFormValidity())},500),S(),i.checkFormValidity()}function P(){p("Initializing global form validation");var t=document.querySelectorAll(".w-form-done, .form_modal-form-sucess, .form-success-message");t.forEach(function(e){e.style.display="none"}),E(),I(),window.zipPatterns=w,window.FormValidator=c,window.FormState=i;try{Object.defineProperty(window,"FORM_ZIP_IS_VALID",{configurable:!0,get:function(){return c.ZIP_IS_VALID},set:function(e){c.ZIP_IS_VALID=e}})}catch{}try{Object.defineProperty(window,"FORM_CAN_SUBMIT",{configurable:!0,get:function(){return c.CAN_SUBMIT},set:function(e){c.CAN_SUBMIT=e}})}catch{}window.isEnglishSite=h,window.translateZipFormat=A,p("Global form validation ready")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",P):P()})();})();
